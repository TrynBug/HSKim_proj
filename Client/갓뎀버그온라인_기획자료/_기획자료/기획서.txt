# 플레이어 - 5명

- 1.골렘
- 2.기사
- 3.오크
- 4.엘프
- 5.궁수

위 번호가 캐릭터 고유번호로 사용



# 조작 키보드 컨트롤

클라이언트에서 H 키로 도움말 표시 확인



# 타격방식

- 논타겟팅

	서버에서 전방의 적을 적당히 검색 하여 타격 (타일 검색)


# 맵특징

- 일부 장애물은 있으나 지형의 개념은 없음
- 서버에서는 별도의 지형 정보를 가지지 않음
- 서버는 맵의 리스폰 위치만 가짐

- 장애물의 검사는 클라이언트만 함

- 서버와 동기화 과정에서 이동불가 지형에 낑기는 현상이 나올 수 있음. 
- mmorpg 에서 흔하게 나타나는 낑기는 캐릭터 현상.
 


# 컨텐츠 기획

- 수명을 다하면 죽음
- 앉아서 쉬면 HP가 오름 

- 공격시 전방의 몬스터를 찾아 공격
- 몬스터가 죽으면 크리스탈을 생성

- 플레이어는 크리스탈을 모음 (사용은 안함 없음)

+ 휴식이 주 컨텐츠인 게임



- 몬스터를 잡으면 경험치를 얻음
- 경험치에 따른 레벨
- 레벨에 따른 HP 맥스치

^ 이는 DB 를 통해서 적용 및 변경



# 플레이어 주요 정보

- 캐릭터 종류
- 고유ID (ClientID)
- 닉네임

- 실좌표 float - 클라이언트는 X.Z 를 쓰지만 이를 X.Y 로 사용
- 타일좌표 - 실좌표 * 2 (소수점 내림)

- 방향 (0~360) - 클라이언트는 로테이션 Y 축
- 획득 크리스탈

- HP - 5000



기타 DB 전용

로그인 시간, 로그인 카운트





# 진행순서

1. 게임실행 (웹을 통한 자동로그인)
2. 타이틀 씬
3-1. 최초 실행시 캐릭터 선택 - DB 에 캐릭터 정보가 없다면 ...
3-2. 캐릭터가 이미 있다면 5번으로.
4. 캐릭터 선택 씬 & 캐릭터 선택
5. 캐릭터 진입 연출씬
6. 게임 플레이

* 캐릭터는 1개만 사용 가능. 



* 좌표방식

- 클라이언트의 3D 좌표는 맵 1블럭객체당 1좌표 
- 서버는 클라이언트 좌표에 * 2 하여 서버좌표(타일좌표)로 계산.

- 결국 1블럭에 4개의 타일이 들어가는 방식
- 클라의 0.5 좌표당 1 x 1 의 타일이 되는 개념

- 클라이언트는 클라이언트 좌표를 그대로 보내며 float 형 (소수점)
- 서버는 이를 받아 클라좌표로 저장하고
- 서버 타일좌표로 변환하여 실제 서버로직 처리

- 서버는 서버의 좌표 (타일좌표) 를 클라에게 보낼때 
- 클라좌표가 있다면 이를 보내며 없다면 타일좌표를 클라좌표로 변환하여 보냄

결국 클라이언트는 클라좌표 체계만 사용하며
서버는 클라와 송수신시 = 클라좌표 / 서버로직시 = 서버좌표(타일)



#define dfMAP_TILE_X_MAX		400
#define dfMAP_TILE_Y_MAX		200

단, 캐릭터간 충돌이 없으므로 한 타일에 2명 이상의 캐릭터가 들어갈 수 있음.


- 서버 입장에서는 짜잘한 이동은 크게 신경쓰지 않으며 타일간의 이동만을 갱신함
- 다만 키보드 조작이기 때문에 유저가 조금이라도 움직였다면 이에 대한 메시지를 수신하며
- 이를 다른 유저들에게 보내줘야 함

- 이동 메시지 수신 > 클라좌표 갱신 > 타일좌표 갱신 > 섹터주변 전송
- 설령 타일좌표 변경이 없었다고 하여도 클라들에게 보내줌.

- TCP Fighter 제작시 처럼 키보드 눌릴시 (액션이 바뀔시) 서버로 메시지 전송
- 추가로 이동 중간중간 클라가 서버에게 좌표와 방향을 보내줌.
- 이 부분은 클라이언트측에서 조절





 